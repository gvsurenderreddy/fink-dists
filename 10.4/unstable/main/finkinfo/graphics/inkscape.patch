diff -urN inkscape-0.44.1-orig/configure.ac inkscape-0.44.1/configure.ac
--- inkscape-0.44.1-orig/configure.ac	2006-09-07 17:19:48.000000000 +1000
+++ inkscape-0.44.1/configure.ac	2008-02-08 16:06:21.000000000 +1100
@@ -27,7 +27,7 @@
   CFLAGS="-Wno-pointer-sign $CFLAGS"
   AC_COMPILE_IFELSE([int dummy;
 ], , CFLAGS="$ink_svd_CFLAGS",)
-  CFLAGS="-Wall -W $CFLAGS"
+  CFLAGS="-Wall -Wformat-security -W $CFLAGS"
 fi
 
 AC_LANG(C++)
@@ -677,7 +677,7 @@
   # programmer deliberately has an unused parameter (e.g. because it's used
   # as a callback or similar function pointer use).
 
-  CXXFLAGS="-Wall -W -Wpointer-arith -Wcast-align -Wsign-compare -Woverloaded-virtual -Wswitch  $CXXFLAGS"
+  CXXFLAGS="-Wall -Wformat-security -W -Wpointer-arith -Wcast-align -Wsign-compare -Woverloaded-virtual -Wswitch  $CXXFLAGS"
 
   dnl Test for arch-specific situations.
   case "$host_cpu" in
@@ -788,17 +788,6 @@
 
 inkscape_sharedir="${runtime_datadir}/${PACKAGE_NAME}"
 
-dnl Define our data paths for config.h
-AC_SUBST(INKSCAPE_DATADIR)
-AC_DEFINE_UNQUOTED([INKSCAPE_DATADIR], "${runtime_datadir}",
-					[Base data directory -- only path-prefix.h should use it!])
-AC_SUBST(PACKAGE_LOCALE_DIR)
-AC_DEFINE_UNQUOTED([PACKAGE_LOCALE_DIR], "${runtime_datadir}/locale",
-					[Localization directory])
-AC_SUBST(INKSCAPE_LIBDIR)
-AC_DEFINE_UNQUOTED([INKSCAPE_LIBDIR], "${prefix}/lib",
-					[Base library directory -- only path-prefix.h should use it!])
-
 dnl Have to add module makefiles (lauris)
 
 AC_CONFIG_FILES([
diff -urN inkscape-0.44.1-orig/share/extensions/eqtexsvg.py inkscape-0.44.1/share/extensions/eqtexsvg.py
--- inkscape-0.44.1-orig/share/extensions/eqtexsvg.py	2006-09-06 15:43:07.000000000 +1000
+++ inkscape-0.44.1/share/extensions/eqtexsvg.py	2008-02-08 15:09:54.000000000 +1100
@@ -11,6 +11,8 @@
 
 - I will try to code XML parsing, not the hard way ;-)
 
+Modified for use with skconvert by Tavmjong Bah
+
 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
@@ -30,92 +32,110 @@
 import inkex, os, tempfile
 
 def create_equation_tex(filename, equation):
-    tex = open(filename, 'w')
-    tex.write("""%% processed with EqTeXSVG.py
+	tex = open(filename, 'w')
+	tex.write("""%% processed with EqTeXSVG.py
 \documentclass{article}
-    
+	
 \\thispagestyle{empty}
 \\begin{document}
 """)
-    tex.write("$$\n")
-    tex.write(equation)
-    tex.write("\n$$\n")
-    tex.write("\end{document}\n")
-    tex.close()
+	tex.write("$$\n")
+	tex.write(equation)
+	tex.write("\n$$\n")
+	tex.write("\end{document}\n")
+	tex.close()
 
 def svg_open(self,filename):
-    # parsing of SVG file with the equation 
-    # real parsing XML to use!!!! it will be easier !!!
-    svg = open(filename, 'r')
-    svg_lines = svg.readlines()
-    
-    # trip top/bottom lines from svg file
-    svg_lines.pop(0)
-    svg_lines.pop(1)
-    svg_lines.pop(len(svg_lines)-1)
-
-    group = self.document.createElement('svg:g')
-    self.current_layer.appendChild(group)
-
-    # deleting "<g... >" "</g>" "<path d=" and "/>" from svg_lines
-    nodegroup=''
-    s_nodegroup_path=''
-        
-    for i in range(1,len(svg_lines)):
-        if svg_lines[i].find("<g") != -1:
-            nodegroup=svg_lines[i].split("<g")
-            nodegroup=nodegroup[1].split(" >")
-            nodegroup=nodegroup[0]+'\n'
-        elif svg_lines[i].find("<path d=") != -1:
-            s_nodegroup_path=svg_lines[i].split("<path d=")
-            s_nodegroup_path=s_nodegroup_path[1]                
-        elif svg_lines[i].find("/>") != -1:
-            s_nodegroup_path=s_nodegroup_path+'"\n'
-        elif svg_lines[i].find("</g>") != -1:
-            nodegroup_svg = self.document.createElement('svg:g')
-            nodegroup_svg.setAttribute('style',nodegroup)
-            nodegroup_path = self.document.createElement('svg:path')
-            nodegroup_path.setAttribute('d',s_nodegroup_path)
-            group.appendChild(nodegroup_svg)                
-            nodegroup_svg.appendChild(nodegroup_path)
-        else:
-            s_nodegroup_path=s_nodegroup_path+svg_lines[i]
+# parsing of SVG file with the equation 
+# real parsing XML to use!!!! it will be easier !!!
+        svg = open(filename, 'r')
+        svg_lines = svg.readlines()
+
+# Trim first line --- firstline <?xml... seems to be already removed but it doesn't
+# hurt to remomve the <svg line too.
+        svg_lines.pop(0)
+
+
+        group = self.document.createElement('svg:g')
+        self.document.documentElement.appendChild(group)
+
+# Deleting  <svg>, <defs>, <g>
+# This is customized explicitely for skconvert's SVG output
+        nodegroup=''
+        s_nodegroup_path=''
+        temp_parts = ''
+	
+        skip = 0;
+        for i in range(1,len(svg_lines)):
+            if svg_lines[i].find("<svg") != -1:
+		    # Do nothing
+		    nothing = 1
+            elif svg_lines[i].find("</svg>") != -1:
+		    # Do nothing
+		    nothing = 1;
+            elif svg_lines[i].find("<g>") != -1:
+		    # Do nothing
+		    nothing = 1;
+            elif svg_lines[i].find("</g>") != -1:
+		    # Do nothing
+		    nothing = 1;
+            elif svg_lines[i].find("<defs>") != -1:
+		    skip = 1;
+	    elif svg_lines[i].find("</defs>") != -1:
+	            skip = 0;
+	    elif skip == 1:
+		    # Do nothing (skipping defs)
+		    nothing = 1
+	    elif svg_lines[i].find("<path") != -1:
+		    # skencil paths are on one line
+                temp_parts=svg_lines[i].split("d=")
+                temp_parts=temp_parts[1]
+                temp_parts=temp_parts.split("/>")
+		temp_parts=temp_parts[0]
+                nodegroup_path = self.document.createElement('svg:path')
+                nodegroup_path.setAttribute('d',temp_parts)
+                group.appendChild(nodegroup_path)
+	    else:
+		    # Do nothing: shouldn't reach
+		    nothing = 1
 
 class EQTEXSVG(inkex.Effect):
-    def __init__(self):
-        inkex.Effect.__init__(self)
-        self.OptionParser.add_option("-f", "--formule",
-                        action="store", type="string", 
-                        dest="formule", default=10.0,
-                        help="Formule LaTeX")
-    def effect(self):
-        
-        base_file = os.path.join(tempfile.gettempdir(), "inkscape-latex.tmp")
-        latex_file = base_file + ".tex"
-        create_equation_tex(latex_file, self.options.formule)
-
-        out_file = os.path.join(tempfile.gettempdir(), "inkscape-latex.tmp.output")
-        os.system('latex -output-directory=' + tempfile.gettempdir() + ' ' + latex_file + '> ' + out_file)
-
-        ps_file = base_file + ".ps"
-        dvi_file = base_file + ".dvi"
-        svg_file = base_file + ".svg"
-        os.system('dvips -q -f -E -D 600 -y 5000 -o ' + ps_file + ' ' + dvi_file)
-        os.system('pstoedit -f svg -dt -ssp ' + ps_file + ' ' + svg_file + '>> ' + out_file)
-
-        # ouvrir le svg et remplacer #7F7F7F par #000000
-        svg_open(self, svg_file)
-
-        # clean up
-        aux_file = base_file + ".aux"
-        log_file = base_file + ".log"
-        os.remove(latex_file)
-        os.remove(aux_file)
-        os.remove(log_file)
-        os.remove(dvi_file)
-        os.remove(ps_file)
-        os.remove(svg_file)
-        os.remove(out_file)
-        
+	def __init__(self):
+		inkex.Effect.__init__(self)
+		self.OptionParser.add_option("-f", "--formule",
+						action="store", type="string", 
+						dest="formule", default=10.0,
+						help="Formule LaTeX")
+	def effect(self):
+		
+		base_file = os.path.join(tempfile.gettempdir(), "inkscape-latex.tmp")
+		latex_file = base_file + ".tex"
+		create_equation_tex(latex_file, self.options.formule)
+
+		out_file = os.path.join(tempfile.gettempdir(), "inkscape-latex.tmp.output")
+		os.system('latex -output-directory=' + tempfile.gettempdir() + ' ' + latex_file + '> ' + out_file)
+
+		ps_file = base_file + ".ps"
+		dvi_file = base_file + ".dvi"
+		sk_file  = base_file + ".sk"
+		svg_file = base_file + ".svg"
+		os.system('dvips -q -f -E -D 600 -y 5000 -o ' + ps_file + ' ' + dvi_file)
+		os.system('pstoedit -f sk -dt -ssp ' + ps_file + ' ' + sk_file + '>> ' + out_file)
+		os.system('skconvert ' + sk_file + ' ' + svg_file + '>> ' + out_file)
+		# ouvrir le svg et remplacer #7F7F7F par #000000
+		svg_open(self, svg_file)
+
+	      # clean up
+		aux_file = base_file + ".aux"
+		log_file = base_file + ".log"
+		os.remove(latex_file)
+		os.remove(aux_file)
+		os.remove(log_file)
+		os.remove(dvi_file)
+		os.remove(ps_file)
+		os.remove(sk_file)
+		os.remove(svg_file)
+		os.remove(out_file)
+		
 e = EQTEXSVG()
 e.affect()
diff -urN inkscape-0.44.1-orig/src/Makefile.am inkscape-0.44.1/src/Makefile.am
--- inkscape-0.44.1-orig/src/Makefile.am	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/Makefile.am	2008-02-08 16:06:21.000000000 +1100
@@ -101,7 +101,8 @@
 DISTCLEANFILES =	\
 	helper/sp-marshal.cpp	\
 	helper/sp-marshal.h	\
-	inkscape_version.h
+	inkscape_version.h	\
+	path-config.h
 
 EXTRA_DIST =	\
 	mkdep.pl	\
@@ -212,7 +213,6 @@
 
 #	io/streamtest
 
-
 test-all.cpp: \
 		$(libnr_test_nr_a_SOURCES)	\
 		$(svg_test_svg_a_SOURCES)	\
diff -urN inkscape-0.44.1-orig/src/Makefile_insert inkscape-0.44.1/src/Makefile_insert
--- inkscape-0.44.1-orig/src/Makefile_insert	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/Makefile_insert	2008-02-08 16:06:21.000000000 +1100
@@ -307,6 +307,12 @@
 view.$(OBJEXT): helper/sp-marshal.h
 help.$(OBJEXT): inkscape_version.h
 
+main.$(OBJEXT): path-config.h
+file.$(OBJEXT): path-config.h
+help.$(OBJEXT): path-config.h
+interface.$(OBJEXT): path-config.h
+inkview.$(OBJEXT): path-config.h
+
 
 # ################################################
 #
@@ -328,6 +334,12 @@
 inkscape_version.h: ../configure.ac
 	echo '#define INKSCAPE_VERSION "$(VERSION)"' > inkscape_version.h
 
+# datadir stuff
+path-config.h: Makefile
+	echo '#define INKSCAPE_DATADIR "$(datarootdir)"' >$@
+	echo '#define PACKAGE_LOCALE_DIR "$(datarootdir)/locale"' >>$@
+	echo '#define INKSCAPE_LIBDIR "$(prefix)/lib"' >>$@
+
 test_all_includes = \
 		$(srcdir)/attributes-test.h	\
 		$(srcdir)/color-profile-test.h	\
diff -urN inkscape-0.44.1-orig/src/conn-avoid-ref.cpp inkscape-0.44.1/src/conn-avoid-ref.cpp
--- inkscape-0.44.1-orig/src/conn-avoid-ref.cpp	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/conn-avoid-ref.cpp	2008-02-08 15:09:22.000000000 +1100
@@ -17,7 +17,7 @@
 #include "libavoid/polyutil.h"
 #include "libavoid/router.h"
 #include "libavoid/connector.h"
-#include "xml/simple-node.cpp"
+#include "xml/simple-node.h"
 #include "document.h"
 #include "prefs-utils.h"
 
diff -urN inkscape-0.44.1-orig/src/debug/logger.cpp inkscape-0.44.1/src/debug/logger.cpp
--- inkscape-0.44.1-orig/src/debug/logger.cpp	2006-09-06 15:42:15.000000000 +1000
+++ inkscape-0.44.1/src/debug/logger.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -116,7 +116,8 @@
                 }
             }
             if (!iter->name) {
-                g_warning("Unknown debugging category %*s", end - start, start);
+                g_warning("Unknown debugging category %*s",
+                          (int) (end - start), start);
             }
         }
         if (*end) {
diff -urN inkscape-0.44.1-orig/src/dom/cssparser.h inkscape-0.44.1/src/dom/cssparser.h
--- inkscape-0.44.1-orig/src/dom/cssparser.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/cssparser.h	2008-02-08 15:15:46.000000000 +1100
@@ -29,6 +29,7 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <glib.h>
 
 #include "dom.h"
 
@@ -81,7 +82,7 @@
     /**
      *
      */
-    void error(char *fmt, ...);
+    void error(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     /**
      * Get the character at the given location in the buffer.
diff -urN inkscape-0.44.1-orig/src/dom/lsimpl.h inkscape-0.44.1/src/dom/lsimpl.h
--- inkscape-0.44.1-orig/src/dom/lsimpl.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/lsimpl.h	2008-02-08 15:15:46.000000000 +1100
@@ -33,6 +33,7 @@
 #include "events.h"
 #include "traversal.h"
 #include "ls.h"
+#include <glib.h>
 
 
 #include "xmlreader.h"
@@ -236,7 +237,7 @@
 
     void spaces();
 
-    void po(char *fmt, ...);
+    void po(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     void pos(const DOMString &str);
 
diff -urN inkscape-0.44.1-orig/src/dom/svg/svgparser.h inkscape-0.44.1/src/dom/svg/svgparser.h
--- inkscape-0.44.1-orig/src/dom/svg/svgparser.h	2006-09-06 15:41:49.000000000 +1000
+++ inkscape-0.44.1/src/dom/svg/svgparser.h	2008-02-08 15:15:46.000000000 +1100
@@ -30,6 +30,7 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <glib.h>
 
 #include "svgimpl.h"
 
@@ -121,7 +122,7 @@
     /**
      *
      */
-    void error(char *format, ...);
+    void error(char *format, ...) G_GNUC_PRINTF(2, 3);
 
 
 
diff -urN inkscape-0.44.1-orig/src/dom/uri.h inkscape-0.44.1/src/dom/uri.h
--- inkscape-0.44.1-orig/src/dom/uri.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/uri.h	2008-02-08 15:15:46.000000000 +1100
@@ -30,6 +30,7 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <glib.h>
 
 #include "dom.h"
 
@@ -197,9 +198,9 @@
 
     DOMString fragment;
 
-    void error(const char *fmt, ...);
+    void error(const char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
-    void trace(const char *fmt, ...);
+    void trace(const char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
 
     int peek(int p);
diff -urN inkscape-0.44.1-orig/src/dom/util/ziptool.h inkscape-0.44.1/src/dom/util/ziptool.h
--- inkscape-0.44.1-orig/src/dom/util/ziptool.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/util/ziptool.h	2008-02-08 15:15:46.000000000 +1100
@@ -32,6 +32,7 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <glib.h>
 
 #include <vector>
 #include <string>
@@ -203,8 +204,8 @@
     std::string fileName;
 
     //debug messages
-    void error(char *fmt, ...);
-    void trace(char *fmt, ...);
+    void error(char *fmt, ...) G_GNUC_PRINTF(2, 3);
+    void trace(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     unsigned long crc;
 
@@ -469,8 +470,8 @@
 private:
 
     //debug messages
-    void error(char *fmt, ...);
-    void trace(char *fmt, ...);
+    void error(char *fmt, ...) G_GNUC_PRINTF(2, 3);
+    void trace(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     //# Private writing methods
 
diff -urN inkscape-0.44.1-orig/src/dom/xmlreader.h inkscape-0.44.1/src/dom/xmlreader.h
--- inkscape-0.44.1-orig/src/dom/xmlreader.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/xmlreader.h	2008-02-08 15:15:46.000000000 +1100
@@ -30,6 +30,7 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <glib.h>
 
 #include "dom.h"
 
@@ -80,7 +81,7 @@
 
 protected:
 
-    void error(char *format, ...);
+    void error(char *format, ...) G_GNUC_PRINTF(2, 3);
 
     int  get(int ch);
     int  peek(int ch);
diff -urN inkscape-0.44.1-orig/src/dom/xpathparser.h inkscape-0.44.1/src/dom/xpathparser.h
--- inkscape-0.44.1-orig/src/dom/xpathparser.h	2006-09-06 15:41:54.000000000 +1000
+++ inkscape-0.44.1/src/dom/xpathparser.h	2008-02-08 15:15:46.000000000 +1100
@@ -30,10 +30,11 @@
  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
-
 #include <stdio.h>
 #include <stdarg.h>
 
+#include <glib.h>
+
 #include <string>
 #include <vector>
 
@@ -415,7 +416,7 @@
     /**
      *
      */
-    void trace(const char *fmt, ...);
+    void trace(const char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     /**
      *
@@ -425,7 +426,7 @@
     /**
      *
      */
-    void error(const char *fmt, ...);
+    void error(const char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     //#################################
     //# LEXICAL  SCANNING
diff -urN inkscape-0.44.1-orig/src/extension/internal/svg.cpp inkscape-0.44.1/src/extension/internal/svg.cpp
--- inkscape-0.44.1-orig/src/extension/internal/svg.cpp	2006-09-06 15:42:02.000000000 +1000
+++ inkscape-0.44.1/src/extension/internal/svg.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -120,7 +120,7 @@
     GnomeVFSResult result = gnome_vfs_open (&handle, uri_local, GNOME_VFS_OPEN_READ);
 
     if (result != GNOME_VFS_OK) {
-        g_warning(gnome_vfs_result_to_string(result));
+        g_warning("%s", gnome_vfs_result_to_string(result));
     }
 
     std::vector<gchar> doc;
diff -urN inkscape-0.44.1-orig/src/file.cpp inkscape-0.44.1/src/file.cpp
--- inkscape-0.44.1-orig/src/file.cpp	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/file.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -286,7 +286,7 @@
     }
 
     tmp += "]";
-    g_message(tmp.c_str());
+    g_message("%s", tmp.c_str());
 }
 
 void dump_ustr(Glib::ustring const &ustr)
@@ -347,7 +347,7 @@
                 tmp += "            ";
             }
 
-            g_message( tmp.c_str() );
+            g_message("%s", tmp.c_str());
         }
     } catch (...) {
         g_message("XXXXXXXXXXXXXXXXXX Exception" );
diff -urN inkscape-0.44.1-orig/src/inkview.cpp inkscape-0.44.1/src/inkview.cpp
--- inkscape-0.44.1-orig/src/inkview.cpp	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/inkview.cpp	2008-02-08 16:11:19.000000000 +1100
@@ -31,6 +31,8 @@
 # include "config.h"
 #endif
 
+#include "path-config.h"
+
 #include <string.h>
 #include <sys/stat.h>
 #include <locale.h>
diff -urN inkscape-0.44.1-orig/src/interface.cpp inkscape-0.44.1/src/interface.cpp
--- inkscape-0.44.1-orig/src/interface.cpp	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/interface.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -1242,7 +1242,7 @@
     gchar *safeMsg = Inkscape::IO::sanitizeString(message);
 
     dlg = gtk_message_dialog_new(NULL, GTK_DIALOG_DESTROY_WITH_PARENT, GTK_MESSAGE_ERROR,
-                                 GTK_BUTTONS_CLOSE, safeMsg);
+                                 GTK_BUTTONS_CLOSE, "%s", safeMsg);
     sp_transientize(dlg);
     gtk_window_set_resizable(GTK_WINDOW(dlg), FALSE);
     gtk_dialog_run(GTK_DIALOG(dlg));
diff -urN inkscape-0.44.1-orig/src/io/inkscapestream.h inkscape-0.44.1/src/io/inkscapestream.h
--- inkscape-0.44.1-orig/src/io/inkscapestream.h	2006-09-06 15:42:37.000000000 +1000
+++ inkscape-0.44.1/src/io/inkscapestream.h	2008-02-08 15:15:46.000000000 +1100
@@ -13,6 +13,7 @@
 
 
 #include <glibmm.h>
+#include <glib.h>
 
 namespace Inkscape
 {
@@ -475,7 +476,7 @@
     virtual void put(gunichar ch) = 0;
     
     /* Formatted output */
-    virtual Writer& printf(char *fmt, ...) = 0;
+    virtual Writer& printf(char *fmt, ...) G_GNUC_PRINTF(2, 3) = 0;
 
     virtual Writer& writeChar(char val) = 0;
 
@@ -531,7 +532,7 @@
     
     
     /* Formatted output */
-    virtual Writer &printf(char *fmt, ...);
+    virtual Writer &printf(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     virtual Writer& writeChar(char val);
 
diff -urN inkscape-0.44.1-orig/src/jabber_whiteboard/message-handler.cpp inkscape-0.44.1/src/jabber_whiteboard/message-handler.cpp
--- inkscape-0.44.1-orig/src/jabber_whiteboard/message-handler.cpp	2006-09-06 15:42:28.000000000 +1000
+++ inkscape-0.44.1/src/jabber_whiteboard/message-handler.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -365,7 +365,7 @@
 		msubtype = lm_message_get_sub_type(message);
 		if (msubtype == LM_MESSAGE_SUB_TYPE_ERROR) {
 			gchar* error = g_strdup(lm_message_node_get_value(root));
-			g_warning(error);
+			g_warning("%s", error);
 
 			// TODO: more robust error handling code
 			this->_sm->disconnectFromDocument();
diff -urN inkscape-0.44.1-orig/src/libcroco/cr-statement.c inkscape-0.44.1/src/libcroco/cr-statement.c
--- inkscape-0.44.1-orig/src/libcroco/cr-statement.c	2006-09-06 15:41:55.000000000 +1000
+++ inkscape-0.44.1/src/libcroco/cr-statement.c	2008-02-08 15:15:46.000000000 +1100
@@ -2442,7 +2442,7 @@
         g_return_if_fail (a_fp && a_this);
         str = cr_statement_ruleset_to_string (a_this, a_indent);
         if (str) {
-                fprintf (a_fp, str);
+                fprintf (a_fp, "%s", str);
                 g_free (str);
                 str = NULL;
         }
@@ -2487,7 +2487,7 @@
         str = cr_statement_charset_to_string (a_this,
                                               a_indent) ;
         if (str) {
-                fprintf (a_fp, str) ;
+                fprintf (a_fp, "%s", str) ;
                 g_free (str) ;
                 str = NULL ;
         }
@@ -2511,7 +2511,7 @@
 
         str = cr_statement_at_page_rule_to_string (a_this, a_indent) ;
         if (str) {
-                fprintf (a_fp, str);
+                fprintf (a_fp, "%s", str);
                 g_free (str) ;
                 str = NULL ; 
         }
@@ -2534,7 +2534,7 @@
 
         str = cr_statement_media_rule_to_string (a_this, a_indent) ;
         if (str) {
-                fprintf (a_fp, str) ;
+                fprintf (a_fp, "%s", str) ;
                 g_free (str) ;
                 str = NULL ;
         }
@@ -2557,7 +2557,7 @@
 
         str = cr_statement_import_rule_to_string (a_this, a_indent) ;
         if (str) {
-                fprintf (a_fp, str) ;
+                fprintf (a_fp, "%s", str) ;
                 g_free (str) ;
                 str = NULL ;
         }
diff -urN inkscape-0.44.1-orig/src/message-context.h inkscape-0.44.1/src/message-context.h
--- inkscape-0.44.1-orig/src/message-context.h	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/message-context.h	2008-02-08 15:15:46.000000000 +1100
@@ -16,6 +16,7 @@
 
 #include <stdarg.h>
 #include <glib/gtypes.h>
+#include <glib.h>
 #include "message.h"
 
 namespace Inkscape {
@@ -56,7 +57,7 @@
       * @param type the message type
       * @param format a printf-style formatting string
       */
-    void setF(MessageType type, gchar const *format, ...);
+    void setF(MessageType type, gchar const *format, ...) G_GNUC_PRINTF(3, 4);
 
     /** @brief pushes a message on the stack using printf-style formatting,
       *        and a stdarg argument list
@@ -82,7 +83,7 @@
       * @param type the message type
       * @param format a printf-style formatting string
       */
-    void flashF(MessageType type, gchar const *format, ...);
+    void flashF(MessageType type, gchar const *format, ...) G_GNUC_PRINTF(3, 4);
 
     /** @brief pushes a message onto the stack for a brief period of time
       *        using printf-style formatting and a stdarg argument list;
diff -urN inkscape-0.44.1-orig/src/message-stack.h inkscape-0.44.1/src/message-stack.h
--- inkscape-0.44.1-orig/src/message-stack.h	2006-09-06 15:42:38.000000000 +1000
+++ inkscape-0.44.1/src/message-stack.h	2008-02-08 15:15:46.000000000 +1100
@@ -16,6 +16,7 @@
 
 #include <sigc++/sigc++.h>
 #include <glib/gtypes.h>
+#include <glib.h>
 #include <stdarg.h>
 #include "gc-managed.h"
 #include "gc-finalized.h"
@@ -85,7 +86,7 @@
       *
       * @return the id of the pushed message
       */
-    MessageId pushF(MessageType type, gchar const *format, ...);
+    MessageId pushF(MessageType type, gchar const *format, ...) G_GNUC_PRINTF(3, 4);
 
     /** @brief pushes a message onto the stack using printf-like formatting,
       *        using a stdarg argument list
@@ -124,7 +125,7 @@
       *
       * @return the id of the pushed message
       */
-    MessageId flashF(MessageType type, gchar const *format, ...);
+    MessageId flashF(MessageType type, gchar const *format, ...) G_GNUC_PRINTF(3, 4);
 
     /** @brief temporarily pushes a message onto the stack using
       *        printf-like formatting, using a stdarg argument list
diff -urN inkscape-0.44.1-orig/src/path-prefix.h inkscape-0.44.1/src/path-prefix.h
--- inkscape-0.44.1-orig/src/path-prefix.h	2006-09-06 15:42:37.000000000 +1000
+++ inkscape-0.44.1/src/path-prefix.h	2008-02-08 16:06:21.000000000 +1100
@@ -14,6 +14,7 @@
 #define _PATH_PREFIX_H_
 
 #include "require-config.h"  // INKSCAPE_DATADIR
+#include "path-config.h"
 #include "prefix.h"
 
 #ifdef __cplusplus
diff -urN inkscape-0.44.1-orig/src/trace/siox.h inkscape-0.44.1/src/trace/siox.h
--- inkscape-0.44.1-orig/src/trace/siox.h	2006-09-06 15:42:23.000000000 +1000
+++ inkscape-0.44.1/src/trace/siox.h	2008-02-08 15:15:46.000000000 +1100
@@ -554,12 +554,12 @@
     /**
      * Error logging
      */
-    void error(char *fmt, ...);
+    void error(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     /**
      * Trace logging
      */
-    void trace(char *fmt, ...);
+    void trace(char *fmt, ...) G_GNUC_PRINTF(2, 3);
 
     /**
      *  Stage 1 of the color signature work.  'dims' will be either
diff -urN inkscape-0.44.1-orig/src/util/format.h inkscape-0.44.1/src/util/format.h
--- inkscape-0.44.1-orig/src/util/format.h	2006-09-06 15:42:32.000000000 +1000
+++ inkscape-0.44.1/src/util/format.h	2008-02-08 15:15:46.000000000 +1100
@@ -14,6 +14,7 @@
 
 #include <stdarg.h>
 #include <glib/gstrfuncs.h>
+#include <glib.h>
 #include "util/share.h"
 
 namespace Inkscape {
@@ -27,6 +28,8 @@
     return result;
 }
 
+// needed since G_GNUC_PRINTF can only be used on a declaration
+ptr_shared<char> format(char const *format, ...) G_GNUC_PRINTF(1,2);
 inline ptr_shared<char> format(char const *format, ...) {
     va_list args;
 
diff -urN inkscape-0.44.1-orig/src/widgets/desktop-widget.cpp inkscape-0.44.1/src/widgets/desktop-widget.cpp
--- inkscape-0.44.1-orig/src/widgets/desktop-widget.cpp	2006-09-06 15:41:59.000000000 +1000
+++ inkscape-0.44.1/src/widgets/desktop-widget.cpp	2008-02-08 15:15:46.000000000 +1100
@@ -752,7 +752,7 @@
                 GTK_DIALOG_DESTROY_WITH_PARENT,
                 GTK_MESSAGE_WARNING,
                 GTK_BUTTONS_YES_NO,
-                text);
+                "%s", text);
         gint response = gtk_dialog_run(GTK_DIALOG(dialog));
         gtk_widget_destroy(dialog);
         if (response == GTK_RESPONSE_YES)
diff -urN inkscape-0.44.1-orig/src/Makefile.am inkscape-0.44.1/src/Makefile.am
--- inkscape-0.44.1-orig/src/Makefile.am	2006-09-06 01:42:38.000000000 -0400
+++ inkscape-0.44.1/src/Makefile.am	2008-02-24 16:49:06.000000000 -0500
@@ -14,6 +14,7 @@
 AUTOMAKE_OPTIONS = 1.7 subdir-objects
 
 INCLUDES =	\
+	-I$(top_srcdir)/cxxtest \
 	$(PERL_CFLAGS) $(PYTHON_CFLAGS)	\
 	$(FREETYPE_CFLAGS)	\
 	$(GNOME_PRINT_CFLAGS)	\
@@ -21,8 +22,7 @@
 	$(LIBLOUDMOUTH_CFLAGS) \
 	$(XFT_CFLAGS)	\
 	-DPOTRACE=\"potrace\"	\
-	$(INKSCAPE_CFLAGS) \
-	-I$(top_srcdir)/cxxtest
+	$(INKSCAPE_CFLAGS)
 
 include Makefile_insert
 include application/Makefile_insert
