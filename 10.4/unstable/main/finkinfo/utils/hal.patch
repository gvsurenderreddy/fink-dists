diff -uNr hal-0.5.8.1/configure hal-0.5.8.1-patched/configure
--- hal-0.5.8.1/configure	2006-09-19 16:24:41.000000000 -0400
+++ hal-0.5.8.1-patched/configure	2007-01-09 16:01:08.000000000 -0500
@@ -22950,6 +22950,8 @@
 case "$host" in
 *-*-solaris*)
 	;;
+*-*-darwin*)
+	;;
 *)
 
 pkg_failed=no
diff -uNr hal-0.5.8.1/hald/dummy/osspec.c hal-0.5.8.1-patched/hald/dummy/osspec.c
--- hal-0.5.8.1/hald/dummy/osspec.c	2006-09-19 16:23:25.000000000 -0400
+++ hal-0.5.8.1-patched/hald/dummy/osspec.c	2007-01-09 16:46:28.000000000 -0500
@@ -74,6 +74,23 @@
 	hal_util_callout_device_add (root, computer_callouts_add_done, NULL, NULL);
 }
 
+
+gboolean
+osspec_device_reprobe (HalDevice *d)
+{
+	return FALSE;
+}
+
+gboolean
+osspec_device_rescan (HalDevice *d)
+{
+	return FALSE;
+}
+
+void osspec_refresh_mount_state_for_block_device (HalDevice *d)
+{
+}
+
 DBusHandlerResult
 osspec_filter_function (DBusConnection *connection, DBusMessage *message, void *user_data)
 {
diff -uNr hal-0.5.8.1/partutil/partutil.c hal-0.5.8.1-patched/partutil/partutil.c
--- hal-0.5.8.1/partutil/partutil.c	2006-09-19 16:23:25.000000000 -0400
+++ hal-0.5.8.1-patched/partutil/partutil.c	2007-01-09 16:07:54.000000000 -0500
@@ -31,7 +31,9 @@
 #include <sys/ioctl.h>
 #include <ctype.h>
 
+#ifndef __APPLE__
 #include <linux/hdreg.h>
+#endif
 
 #define BLKGETSIZE64 _IOR(0x12,114,size_t)
 
diff -uNr hal-0.5.8.1/tools/hal-storage-closetray.c hal-0.5.8.1-patched/tools/hal-storage-closetray.c
--- hal-0.5.8.1/tools/hal-storage-closetray.c	2006-09-19 16:23:25.000000000 -0400
+++ hal-0.5.8.1-patched/tools/hal-storage-closetray.c	2007-01-09 16:21:09.000000000 -0500
@@ -68,9 +68,6 @@
 	exit (1);
 }
 
-#ifdef __FreeBSD__
-#error Need FreeBSD specific changes here
-#endif
 
 
 int
diff -uNr hal-0.5.8.1/tools/hal-storage-mount.c hal-0.5.8.1-patched/tools/hal-storage-mount.c
--- hal-0.5.8.1/tools/hal-storage-mount.c	2006-09-19 16:23:25.000000000 -0400
+++ hal-0.5.8.1-patched/tools/hal-storage-mount.c	2007-01-09 16:21:09.000000000 -0500
@@ -794,7 +794,7 @@
 			printf ("Cannot chown '%s' to uid: %d, gid: %d\n", mount_dir,
 				calling_uid, calling_gid);
 			g_rmdir (mount_dir);
-			unknown_error ();
+			unknown_error ("Cannot chown dir");
 		}
 #endif
 	}
diff -uNr hal-0.5.8.1/tools/hal-storage-shared.c hal-0.5.8.1-patched/tools/hal-storage-shared.c
--- hal-0.5.8.1/tools/hal-storage-shared.c	2006-09-19 16:23:25.000000000 -0400
+++ hal-0.5.8.1-patched/tools/hal-storage-shared.c	2007-01-09 16:21:09.000000000 -0500
@@ -97,7 +97,7 @@
 		return mtab->mounts[mtab->iter++].f_mntfromname;
 	else
 		return NULL;
-#error TODO: set *mount_point to g_strdup()-ed value if mount_point!=NULL
+#warning TODO: set *mount_point to g_strdup()-ed value if mount_point!=NULL
 #elif sun
 	static struct mnttab mnt;
 
