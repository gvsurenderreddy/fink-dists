Package: gnopernicus9
Version: 0.12.0

Revision: 1001

Depends: <<
	%N-shlibs (>= %v-%r),
	at-spi (>= 1.7.14-1),
	atk1-shlibs (>= 1.12.3-1),
	audiofile-shlibs (>= 0.2.3-1),
	esound-shlibs (>= 0.2.28-1),
	gail18,
	gconf2 (>= 2.16.0-1),
	glib2-shlibs (>= 2.12.0-1),
	gnome-keyring,
	gnome-mag2 (>= 0.14.0-1),
	gnome-speech (>= 0.2.7-1),
	gnome-vfs2-unified (>= 1:2.16.0-1),
	gtk+2 (>= 2.10.0-1),
	libart2-shlibs (>= 2.3.16-1),
	libbonobo2 (>= 2.16.0-1),
	libbonoboui2 (>= 2.16.0-1),
	libgail-gnome,
	libgettext3-shlibs,
	libgnome2 (>= 2.16.0-1),
	libgnomeui2 (>= 2.16.0-1),
	libgnomecanvas2 (>= 2.14.0-1),
	libiconv,
	libjpeg-shlibs,
	libxml2-shlibs (>= 2.6.7-1),
	orbit2 (>= 2.8.1-1),
	pango1-xft2-ft219 (>= 1.14.9-1),
	popt-shlibs,
	scrollkeeper,
	x11-shlibs
<<
BuildDepends: <<
	at-spi-dev (>= 1.7.14-1),
	atk1 (>= 1.12.3-1),
	audiofile (>= 0.2.3-1),
	cairo (>= 1.2-1),
	dbus-dev (>= 1.0-1),
	esound (>= 0.2.28-1),
	fontconfig2-dev (>= 2.3.2-13),
	freetype219,
	gail18-dev,
	gconf2-dev (>= 2.16.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.12.0-1),
	gnome-keyring-dev (>= 0.4.3-1),
	gnome-mag2-dev (>= 0.14.0-1),
	gnome-speech-dev (>= 0.2.7-1),
	gnome-vfs2-unified-dev (>= 1:2.16.0-1),
	gtk+2-dev (>= 2.10.0-1),
	gtk-doc,
	intltool,
	libart2 (>= 2.3.16-1),
	libbonobo2-dev (>= 2.16.0-1),
	libbonoboui2-dev (>= 2.16.0-1),
	libgettext3-dev,
	libglade2 (>= 2.6.0-1),
	libgnome2-dev (>= 2.16.0-1),
	libgnomeui2-dev (>= 2.16.0-1),
	libgnomecanvas2-dev (>= 2.14.0-1),
	libhowl-dev,
	libiconv-dev,
	libjpeg,
	libxml2 (>= 2.6.7-1),
	orbit2-dev (>= 2.8.1-1),
	pango1-xft2-ft219-dev (>= 1.14.9-1),
	pkgconfig (>= 0.21-1),
	popt,
	x11-dev,
	xft2-dev
<<
Replaces: gnopernicus
Source: mirror:gnome:sources/gnopernicus/0.12/gnopernicus-%v.tar.bz2
Source-MD5: 8228afc6b98306207349df150592b83b
PatchScript: <<
	perl -pi -e 's|\s*options.c_oflag &= ~OCRNL;|#if defined(OCRNL)\n$&\n#endif|' braille/libbrl/sercomm.c
<<
Patch: %n.patch
NoSetCPPFLAGS: true
SetCPPFLAGS: -no-cpp-precomp -I%p/lib/pango-ft219/include/pango-1.0 -I%p/lib/pango-ft219/include -I%p/lib/freetype219/include/freetype2 -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include -I%p/include -I%p/include/sys
NoSetLDFLAGS: true
SetLDFLAGS: -L%p/lib/pango-ft219/lib -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib -lresolv
SetLIBS: -L%p/lib
SetCFLAGS: -Os
SetCXXFLAGS: -Os
ConfigureParams: --disable-schemas-install --disable-scrollkeeper --libexecdir=%p/lib/gnopernicus-1.0 --mandir=%p/share/man --disable-dependency-tracking --enable-gtk-doc --disable-brltty PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" FREETYPE_CONFIG=%p/lib/freetype219/bin/freetype-config
CompileScript: <<
#!/bin/sh -ev

	./configure %c
	# gnopernicus doesn't know how libtool works  :P
	make LT_CURRENT=9 LT_REVISION=0 LT_AGE=0
<<
InstallScript: <<
	GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 make -j1 install DESTDIR="%d"
<<

SplitOff: <<
	Package: %N-shlibs
	Depends: <<
		at-spi-shlibs (>= 1.7.14-1),
		atk1-shlibs (>= 1.12.3-1),
		audiofile-shlibs (>= 0.2.3-1),
		esound-shlibs (>= 0.2.28-1),
		gail18-shlibs,
		gconf2-shlibs (>= 2.16.0-1),
		glib2-shlibs (>= 2.12.0-1),
		gnome-keyring-shlibs,
		gnome-mag2-shlibs (>= 0.14.0-1),
		gnome-speech-shlibs (>= 0.2.7-1),
		gnome-vfs2-unified-shlibs (>= 1:2.16.0-1),
		gtk+2-shlibs (>= 2.10.0-1),
		libart2-shlibs (>= 2.3.16-1),
		libbonobo2-shlibs (>= 2.16.0-1),
		libbonoboui2-shlibs (>= 2.16.0-1),
		libgettext3-shlibs,
		libgnome2-shlibs (>= 2.16.0-1),
		libgnomeui2-shlibs (>= 2.16.0-1),
		libgnomecanvas2-shlibs (>= 2.14.0-1),
		libiconv,
		libjpeg-shlibs,
		libxml2-shlibs (>= 2.6.7-1),
		orbit2-shlibs (>= 2.8.1-1),
		pango1-xft2-ft219-shlibs (>= 1.14.9-1),
		popt-shlibs,
		x11-shlibs
	<<
	Replaces: gnopernicus
	Files: lib/gnopernicus-1.0/lib*.9*.dylib
	Shlibs: <<
		%p/lib/gnopernicus-1.0/libbrl.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libke.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libmag.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libsrconf.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libsrlow.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libsrs.9.dylib 10.0.0 %n (>= 0.10.9-1)
		%p/lib/gnopernicus-1.0/libsrutil.9.dylib 10.0.0 %n (>= 0.10.9-1)
	<<
	DocFiles: AUTHORS COPYING ChangeLog help/braille_monitor/ChangeLog:ChangeLog.braille_monitor po/ChangeLog:ChangeLog.po NEWS README TODO
<<

SplitOff2: <<
	Package: %N-dev
	Depends: %N (= %v-%r)
	Replaces: gnopernicus
	BuildDependsOnly: true
	Files: lib/gnopernicus-1.0/lib* lib/pkgconfig include
	DocFiles: AUTHORS COPYING ChangeLog help/braille_monitor/ChangeLog:ChangeLog.braille_monitor po/ChangeLog:ChangeLog.po NEWS README TODO
<<

PostInstScript: <<
	if [ configure = "$1" ]; then
		scrollkeeper-update
		export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
		for s in brlmonitor gnopernicus remote; do
			gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/$s.schemas >/dev/null
		done
	fi
<<
PostRmScript: <<
	if [ upgrade != "$1" ]; then
		scrollkeeper-update
	fi
<<
ConfFiles: <<
	%p/etc/gconf/schemas/brlmonitor.schemas
	%p/etc/gconf/schemas/gnopernicus.schemas
	%p/etc/gconf/schemas/remote.schemas
	%p/etc/gnopernicus-1.0/translation_tables/de.a2b
	%p/etc/gnopernicus-1.0/translation_tables/en_US.a2b
	%p/etc/gnopernicus-1.0/translation_tables/es.a2b
	%p/etc/gnopernicus-1.0/translation_tables/sv.a2b
<<
DocFiles: AUTHORS COPYING ChangeLog help/braille_monitor/ChangeLog:ChangeLog.braille_monitor po/ChangeLog:ChangeLog.po NEWS README TODO
Description: Assistive Tech. for the visually impaired
DescDetail: <<
Gnopernicus provides Assistive Technologies (AT) for blind and
visually impaired persons.
<<
DescPackaging: <<
	Previous major libversion packaging was not compliant with Shlibs
	Policy (headers, dylib runtime and links, userland binaries all in
	single "gnopernicus" package), so we need to always Replaces it.
	Downgrading to old lib will be tricky, but nothing Depends on it so
	not a major concern until proven otherwise.

	braille device support deactivated because it doesn't appear to know
	how to support Mac systems and I have no access to such devices to
	experiment with them.

	Testing of speech (and maybe other speech uses) requires a speech
	driver such as festival, that is not in fink at this time.
<<
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Homepage: http://www.gnome.org/
