diff -uNr libgtop-2.14.8/configure.in libgtop-2.14.8-new/configure.in
--- libgtop-2.14.8/configure.in	2007-02-17 20:13:20.000000000 -0500
+++ libgtop-2.14.8-new/configure.in	2007-03-02 16:14:12.000000000 -0500
@@ -411,6 +411,7 @@
 sysdeps/solaris/Makefile
 sysdeps/aix/Makefile
 sysdeps/bsd/Makefile
+sysdeps/darwin/Makefile
 src/Makefile
 src/daemon/Makefile
 src/inodedb/Makefile
diff -uNr libgtop-2.14.8/include/glibtop/version.h libgtop-2.14.8-new/include/glibtop/version.h
--- libgtop-2.14.8/include/glibtop/version.h	2007-01-02 17:50:26.000000000 -0500
+++ libgtop-2.14.8-new/include/glibtop/version.h	2007-03-02 16:14:37.000000000 -0500
@@ -24,7 +24,7 @@
 
 #include <glibtop.h>
 
-#define LIBGTOP_VERSION_STRING "Libgtop %s server version %s (%u,%u,%u,%u)."
+#define LIBGTOP_VERSION_STRING "Libgtop %s server version %s (%lu,%lu,%lu,%lu)."
 
 G_BEGIN_DECLS
 
diff -uNr libgtop-2.14.8/lib/open.c libgtop-2.14.8-new/lib/open.c
--- libgtop-2.14.8/lib/open.c	2007-02-17 20:36:30.000000000 -0500
+++ libgtop-2.14.8-new/lib/open.c	2007-03-02 16:15:00.000000000 -0500
@@ -147,7 +147,7 @@
 
 		if (nbytes != size)
 			glibtop_error_r (server,
-					 "Requested %u bytes but got %u.",
+					 "Requested %lu bytes but got %lu.",
 					 size, nbytes);
 
 		glibtop_read_l (server, nbytes, buffer);
diff -uNr libgtop-2.14.8/libgtop-sysdeps.m4 libgtop-2.14.8-new/libgtop-sysdeps.m4
--- libgtop-2.14.8/libgtop-sysdeps.m4	2007-02-17 20:13:32.000000000 -0500
+++ libgtop-2.14.8-new/libgtop-sysdeps.m4	2007-03-02 16:38:25.000000000 -0500
@@ -89,8 +89,14 @@
 	  libgtop_sysdeps_dir=aix
 	  libgtop_use_machine_h=yes
 	  libgtop_need_server=yes
+	  libgtop_postinstall='chgrp kmem $(DESTDIR)$(bindir)/libgtop_server2 && chmod 6755 $(DESTDIR)/$(bindir)/libgtop_server2'
+	  ;;
+	darwin*)
+	  libgtop_sysdeps_dir=darwin
+	  libgtop_use_machine_h=yes
+	  libgtop_need_server=yes
 	  libgtop_have_sysinfo=yes
-	  libgtop_postinstall='chgrp system $(bindir)/libgtop_server && chmod g+s $(bindir)/libgtop_server2'
+	  libgtop_postinstall='chgrp sys $(bindir)/libgtop_server && chmod g+s $(bindir)/libgtop_server2'
 	  ;;
 	*)
 	  if test x$hacker_mode = xyes ; then
diff -uNr libgtop-2.14.8/ltmain.sh libgtop-2.14.8-new/ltmain.sh
--- libgtop-2.14.8/ltmain.sh	2006-03-11 14:40:23.000000000 -0500
+++ libgtop-2.14.8-new/ltmain.sh	2007-03-02 16:18:48.000000000 -0500
@@ -2545,7 +2545,7 @@
 	   { test "$use_static_libs" = no || test -z "$old_library"; }; then
 	  if test "$installed" = no; then
 	    notinst_deplibs="$notinst_deplibs $lib"
-	    need_relink=yes
+	    need_relink=no
 	  fi
 	  # This is a shared library
 
@@ -4023,8 +4023,24 @@
 	  eval test_cmds=\"$archive_expsym_cmds\"
 	  cmds=$archive_expsym_cmds
 	else
+	  if test "x$verstring" = "x0.0"; then
+	      tmp_verstring=
+	    else
+	      tmp_verstring="$verstring"
+	    fi
+	    save_deplibs="$deplibs"
+	    for conv in $convenience; do
+	      tmp_deplibs=
+	      for test_deplib in $deplibs; do
+	        if test "$test_deplib" != "$conv"; then
+	          tmp_deplibs="$tmp_deplibs $test_deplib"
+	        fi
+	      done
+	      deplibs="$tmp_deplibs"
+	    done
 	  eval test_cmds=\"$archive_cmds\"
 	  cmds=$archive_cmds
+     deplibs="$save_deplibs"
 	  fi
 	fi
 
diff -uNr libgtop-2.14.8/src/daemon/Makefile.am libgtop-2.14.8-new/src/daemon/Makefile.am
--- libgtop-2.14.8/src/daemon/Makefile.am	2007-01-02 17:50:27.000000000 -0500
+++ libgtop-2.14.8-new/src/daemon/Makefile.am	2007-03-02 16:19:02.000000000 -0500
@@ -50,5 +50,5 @@
 EXTRA_DIST			= server_config.h.in server_config.pl
 
 install-exec-hook:
-	-@libgtop_postinstall@
+	@libgtop_postinstall@
 
diff -uNr libgtop-2.14.8/src/daemon/main.c libgtop-2.14.8-new/src/daemon/main.c
--- libgtop-2.14.8/src/daemon/main.c	2007-02-17 20:36:30.000000000 -0500
+++ libgtop-2.14.8-new/src/daemon/main.c	2007-03-02 16:19:25.000000000 -0500
@@ -52,7 +52,7 @@
 			glibtop_server_features);
 
     if (enable_debug)
-	syslog_message (LOG_DEBUG, "SIZEOF: %u - %u - %u - %u - %u - %u",
+	syslog_message (LOG_DEBUG, "SIZEOF: %lu - %lu - %lu - %lu - %lu - %lu",
 			sizeof (glibtop_command), sizeof (glibtop_response),
 			sizeof (glibtop_mountentry), sizeof (glibtop_union),
 			sizeof (glibtop_sysdeps),
diff -uNr libgtop-2.14.8/sysdeps/Makefile.am libgtop-2.14.8-new/sysdeps/Makefile.am
--- libgtop-2.14.8/sysdeps/Makefile.am	2007-02-17 20:13:32.000000000 -0500
+++ libgtop-2.14.8-new/sysdeps/Makefile.am	2007-03-02 16:19:33.000000000 -0500
@@ -2,4 +2,4 @@
 SUBDIRS			= common @sysdeps_dir@
 
 DIST_SUBDIRS		= bsd common linux osf1 \
-			  stub stub_suid sun4 freebsd solaris aix
+			  stub stub_suid sun4 freebsd solaris aix darwin
